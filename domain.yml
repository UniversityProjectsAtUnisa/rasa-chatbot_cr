version: "2.0"

intents:
  - greet
  - goodbye
  - ask_capabilities
  - introduce_myself
  - operation_on_item
  - show_items
  - stop
  - out_of_scope

entities:
  - item
  - operation
  - user
  - CARDINAL

actions:
  - utter_greet
  - utter_already_greet
  - utter_goodbye
  - utter_pleased
  - utter_help
  - utter_capabilities

  - utter_ask_user
  - utter_ask_item
  - utter_ask_operation
  - action_item
  - action_show_items
  - validate_item_form

  - utter_stop
  - utter_stop_nothing
  - action_stop_form

  - action_communicate_username
  - action_greet

slots:
  greeted:
    type: bool
    initial_value: false
    influence_conversation: false
  item:
    type: text
    influence_conversation: false
  operation:
    type: text
    influence_conversation: false
  user:
    type: text
    influence_conversation: false
  CARDINAL:
    type: text
    influence_conversation: false

forms:
  item_form:
    required_slots:
      user:
        - type: from_entity
          entity: user
      operation:
        - type: from_entity
          entity: operation
      item:
        - type: from_entity
          entity: item

responses:
  utter_greet:
    - condition:
        - type: slot
          name: user
          value: null
      text: "Hi! What is your name?"
    - condition:
        - type: slot
          name: user
          value: null
      text: "Hi! Who are you?"
    - condition:
        - type: slot
          name: user
          value: null
      text: "Hello! Who am I talking to?"
    - condition:
        - type: slot
          name: user
          value: null
      text: "Hello! Who do I have the pleasure of speaking to?"
    - text: "Hi {user}. What are you looking for?"
    - text: "Hi {user}! I am at your service."
    - text: "Hello {user}! What can I help you with today?"

  utter_goodbye:
    - condition:
        - type: slot
          name: user
          value: null
      text: "Bye"
    - condition:
        - type: slot
          name: user
          value: null
      text: "Talk to you later!"  
    - condition:
        - type: slot
          name: user
          value: null
      text: "Have a good day."  
    - condition:
        - type: slot
          name: user
          value: null
      text: "Until next time!"   
    - text: "Bye {user}"
    - text: "Talk to you later {user}!"
    - text: "Have a good day {user}."
    - text: "Until next time {user}!"

  utter_pleased:
    - text: "Nice to meet you, {user}"
    - text: "Pleased to meet you, {user}"

  utter_capabilities:
    - text: "I can manage a shopping list for every user who talks to me. You can ask me to add or remove something from your list or just show your current list."
    - text: "I'm your shopping list assistant. I can add and remove items from your list or just show your current list."

  utter_ask_user:
    - text: "Who are you?"
    - text: "Who am I talking to?"
    - text: "Who do I have the pleasure of speaking to?"

  utter_ask_item:
    - condition:
        - type: slot
          name: operation
          value: "add"
      text: "What do you want to buy?"
    - condition:
        - type: slot
          name: operation
          value: "remove"
      text: "What do you want to remove from your list?"

  utter_ask_operation:
    - condition:
        - type: slot
          name: item
          value: null
      text: "Which operation do you want to do (add, remove)?"
    - text: "Which operation do you want to do with {item} (add, remove)?"
    - text: "What do you want to do with {item} (add, remove)?"

  utter_stop:
    - text: "Request cancelled!"

  utter_help:
    - text: "How can I help you?"
    - text: "How can I help?"

  utter_stop_nothing:
    - text: "There is nothing to stop at the moment. If you want to terminate the interaction we can say goodbye."
    - text: "I am not asking anything at the moment. If you want to terminate the interaction we can say goodbye."

  utter_already_greet:
    - condition:
        - type: slot
          name: user
          value: null
      text: "I already greeted you. What is your name?"
    - condition:
        - type: slot
          name: user
          value: null
      text: "I already greeted you. Who are you?"
    - condition:
        - type: slot
          name: user
          value: null
      text: "Hi! (Again?) Who am I talking to?"
    - condition:
        - type: slot
          name: user
          value: null
      text: "Hello! Hello! Hello! Who do I have the pleasure of speaking to?"
    - text: "I already greeted you, {user}"
    - text: "Hi again {user}!"
    - text: "Hello {user}! Hello {user}! Hello {user}!"

  utter_default:
    - text: Sorry I didn't get that. Can you rephrase?
    - text: Sorry I didn't understand. Can you rephrase that?

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
